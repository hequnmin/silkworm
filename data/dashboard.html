<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Silkworm Cloud</title>

    <!--JQuery 1.12.4-->
    <script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>

    <!-- Bootstrap 3.3.7 -->
    <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <!--bootstrap-slider-->
    <link href="https://cdn.bootcss.com/bootstrap-slider/9.4.1/css/bootstrap-slider.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/bootstrap-slider/9.4.1/bootstrap-slider.min.js"></script>

    <!--bootstrap-switch-->
    <link href="https://cdn.bootcss.com/bootstrap-switch/3.3.4/css/bootstrap3/bootstrap-switch.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/bootstrap-switch/3.3.4/js/bootstrap-switch.min.js"></script>

    <!-- Define CSS -->
    <style>
        body {
            font-family: Nunito,PingFang SC,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;
        }

        #sliderbarSlider .slider-selection {
            background: #BABABA;
        }
    </style>

</head>
<body>
<nav class="navbar">
    <div class="container">
        <div class="navbar-header">
            <a class="navbar-brand">Silkworm Cloud</a>
        </div>
    </div>
</nav>
<div class="container">
    <form class="form-horizontal">

        <div class="panel panel-default">
            <div class="panel-body">
                <h3>Motor Control</h3>
                <hr/>
                <div class="row">
                    <div class="form-group">
                        <div class="col-md-3 col-xs-6 text-right">
                            <label for="motorPwmFreqVal">Motor PWM</label>
                        </div>
                        <div class="col-md-3 col-xs-6">
                            <input type="text"
                                   class="sliderbar"
                                   id="motorPwmFreqVal"
                                   name="motorPwmFreqVal"
                                   data-slider-id="sliderbarSlider"
                                   data-slider-min="0"
                                   data-slider-max="1000"
                                   data-slider-step="10"
                                   data-slider-value="$MOTOR_PWM_FREQ_VAL$"/>
                        </div>
                        <div class="col-md-1 col-xs-6 text-right">
                            <label for="motorPwmFreqPin">Out Pin</label>
                        </div>
                        <div class="col-md-2 col-xs-6">
                            <input type="text" class="form-control" id="motorPwmFreqPin" name="motorPwmFreqPin" value="$MOTOR_PWM_FREQ_PIN$">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group">
                        <div class="col-md-3 col-xs-6 text-right">
                            <label>Direction</label>
                        </div>
                        <div class="col-md-3 col-xs-6">
                            <div class="switch">
                                <input type="checkbox" id="motorPwmDirectVal" name="motorPwmDirectVal" $MOTOR_PWM_DIRECT_VAL$ />
                            </div>
                        </div>

                        <div class="col-md-1 col-xs-6 text-right">
                            <label for="motorPwmDirectPin">Out Pin</label>
                        </div>
                        <div class="col-md-2 col-xs-6">
                            <input type="text" class="form-control" id="motorPwmDirectPin" name="motorPwmDirectPin" value="$MOTOR_PWM_DIRECT_PIN$">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="panel panel-default">
            <div class="panel-body">
                <h3>Thermostat Control</h3>
                <hr/>
                <div class="row">
                    <div class="form-group">
                        <div class="col-md-3 col-xs-6 text-right">
                            <label>Thermostat PWM</label>
                        </div>
                        <div class="col-md-3 col-xs-6">
                            <input type="text"
                                   class="sliderbar"
                                   id="sliderbarTemperaturePwm"
                                   name="TEMPERATUREFREQUENCY"
                                   data-slider-id="sliderbarSlider"
                                   data-slider-min="5"
                                   data-slider-max="95"
                                   data-slider-step="5"
                                   data-slider-value="15"
                                   value="$TEMPERATUREFREQUENCY$"
                            >
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group">
                        <div class="col-md-3 col-xs-6 text-right">
                            <label>Temperature GPIO</label>
                        </div>
                        <div class="col-md-1 col-xs-2">
                            <input class="form-control" type="text" id="temperatureGPIO" name="TEMPERATUREPIN" value="$TEMPERATUREPIN$">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12 col-xs-12 text-right">
                <button type="submit" class="btn btn-primary">Save Config & Start</button>
            </div>
        </div>
    </form>
</div>

<script language="JavaScript">
  // $('input.sliderbar').slider({
  //   formatter: function (value) {
  //
  //     return 'Current value: ' + value;
  //   }
  // }).on('slide', function (slideEvt) {
  //   //当滚动时触发
  //   console.info(slideEvt);
  //   //获取当前滚动的值，可能有重复
  //   console.info(slideEvt.value);
  // }).on('change', function (e) {
  //   //当值发生改变的时候触发
  //   console.info(e);
  //   //获取旧值和新值
  //   console.info(e.value.oldValue + '--' + e.value.newValue);
  // });
    $('input.sliderbar').slider({
        formatter: function (value) {

          return 'Current value: ' + value;
        }
    });
    $("[name='motorPwmDirectVal']").bootstrapSwitch();

    $(function(){
        //输入框的值改变时触发
        $("#motorPwmFreqVal").on("change",function(e){
            //获取input输入的值
            console.log(e);
            $.post("/config", "{motorPwmFreqVal:" + e.target.value + "}",
                function(data,status){
                  console.log("数据：" + data + "\n状态：" + status);
                }
            );
        });
        $("#motorPwmFreqPin").on("change",function(e){
            $.post("/config", "{motorPwmFreqPin:" + e.target.value +"}",
              function(data,status){
                console.log("数据：" + data + "\n状态：" + status);
              }
            );
        });
    });
</script>
</body>
</html>
